# webwaka-core-permissions

## Overview
This is a TypeScript library that provides role-based access control (RBAC) and authorization core service powered by Casbin. It's a library module, not a web application.

## Project Structure
- `src/` - Source TypeScript files
  - `index.ts` - Main exports
  - `permissions-service.ts` - Core permissions service implementation
  - `casbin-adapter.ts` - Casbin policy engine adapter
  - `storage.ts` - Storage interfaces and in-memory implementations
  - `types.ts` - TypeScript type definitions
  - `validation.ts` - Input validation using Zod
  - `*.test.ts` - Jest tests
- `dist/` - Compiled JavaScript output (generated by build)

## Commands
- `npm run build` - Compile TypeScript to JavaScript
- `npm test` - Run Jest tests (59 tests, >93% coverage)
- `npm run lint` - Run ESLint
- `npm run typecheck` - Type check without emitting

## Dependencies
- Runtime: casbin (policy engine), zod (validation)
- Dev: TypeScript, Jest, ts-jest, ESLint

## Key Features
- Casbin-powered policy engine for deterministic authorization
- Tenant-isolated RBAC with domain support
- Capability-based permissions (module:action format)
- Auditable permission decisions with grantedBy tracking
- Storage abstractions for flexible backends

## Notes
- This is a library module meant to be imported by other projects
- Uses in-memory storage implementations for testing
- Implements strict tenant isolation for multi-tenant applications
- All permission checks return deterministic, auditable results
